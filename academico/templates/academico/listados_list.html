{% extends "panel/grafico.html" %}
{% load static %}

{% block main_content %}
<div class="container-fluid">
  <div class="card">
    <div class="card-header card-header-primary">
      <h4 class="card-title mb-0">Listados de materias</h4>
    </div>
    <div class="card-body">

      <form method="get" class="form-inline mb-3">
        <div class="form-group mr-2">
          <label class="mr-2">Programa</label>
          <select name="programa" class="form-control">
            <option value="">— Todos —</option>
            {% for p in programas %}
              <option value="{{ p.codigo }}" {% if prog_code == p.codigo %}selected{% endif %}>
                {{ p.codigo }} — {{ p.nombre }}
              </option>
            {% endfor %}
          </select>
        </div>

        <div class="form-group mr-2">
          <label class="mr-2">Buscar</label>
          <input type="text" class="form-control" name="q" value="{{ q }}" placeholder="Nombre del listado...">
        </div>

        <button class="btn btn-primary">Filtrar</button>
      </form>

      <div class="table-responsive">
        <table class="table table-striped table-hover">
          <thead>
            <tr>
              <th>Nombre</th>
              <th>Programa</th>
              <th>Creado</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            {% for l in listados %}
            <tr>
              <td>{{ l.nombre }}</td>
              <td>{{ l.programa.codigo }}</td>
              <td>{{ l.creado_en|date:"d/m/Y H:i" }}</td>
              <td class="text-right">
                <a class="btn btn-sm btn-outline-primary" href="{% url 'academico:listado_detalle' l.pk %}">Abrir</a>
              </td>
            </tr>
            {% empty %}
            <tr><td colspan="4" class="text-center text-muted">No hay listados.</td></tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

    </div>
  </div>
</div>
{% endblock %}
